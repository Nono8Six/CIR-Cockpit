# --- Connexion projet Supabase (obligatoire pour l'API backend) ---
# URL de ton projet Supabase.
# Ou la trouver: Dashboard Supabase -> Project Settings -> API -> Project URL
SUPABASE_URL=https://your-project.supabase.co

# Cle serveur "service_role" (privileges admin). Ne jamais exposer au frontend.
# Ou la trouver: Dashboard Supabase -> Project Settings -> API -> service_role (secret)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Cle publique "anon/publishable" utilisee pour appels publics et certains tests.
# Ou la trouver: Dashboard Supabase -> Project Settings -> API -> anon / publishable key
SUPABASE_ANON_KEY=your-anon-key

# --- Rate limit backend ---
RATE_LIMIT_MAX=10
RATE_LIMIT_WINDOW_SECONDS=300

# --- P2 JWT explicite (optionnel) ---
# Pourquoi prefixe SUPABASE_ ?
# Parce que ces JWT sont ceux emis par Supabase Auth pour ce projet.
# Le prefixe indique clairement la source et evite les collisions de noms.

# URL JWKS (cles publiques) pour verifier la signature JWT.
# Si vide: derive automatiquement de SUPABASE_URL + /auth/v1/.well-known/jwks.json
SUPABASE_JWKS_URL=

# Issuer attendu dans le JWT (claim "iss").
# Si vide: derive automatiquement de SUPABASE_URL + /auth/v1
SUPABASE_JWT_ISSUER=

# Audience attendue (claim "aud"). Valeur Supabase standard: authenticated
SUPABASE_JWT_AUDIENCE=authenticated

# Algorithmes JWT autorises (liste CSV).
# Politique projet: ES256 strict (cle JWT current en ECC P-256 dans Supabase).
SUPABASE_JWT_ALLOWED_ALGS=ES256

# Duree de cache local des cles JWKS (ms). 600000 = 10 minutes
SUPABASE_JWKS_CACHE_TTL_MS=600000

# --- Tests d'integration backend (optionnel, local) ---
# 0 = desactive (tests ignores), 1 = active la suite integration
RUN_API_INTEGRATION=0

# Compte super_admin de test (email + mot de passe) pour tester /admin/*
API_INT_ADMIN_EMAIL=
API_INT_ADMIN_PASSWORD=

# Compte utilisateur standard de test (email + mot de passe) pour tester /data/*
API_INT_USER_EMAIL=
API_INT_USER_PASSWORD=

# Origin envoyee pour verifier les preflight CORS (OPTIONS)
API_INT_ORIGIN=http://localhost:3000
